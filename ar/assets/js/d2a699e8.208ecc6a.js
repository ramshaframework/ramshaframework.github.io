"use strict";(globalThis.webpackChunkramsha_doc=globalThis.webpackChunkramsha_doc||[]).push([[4633],{1665:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"basics/architecture/modularity","title":"Modularity","description":"Modularity is a core concept in the Ramsha Framework.\\\\","source":"@site/docs/basics/architecture/modularity.md","sourceDirName":"basics/architecture","slug":"/basics/architecture/modularity","permalink":"/ar/docs/basics/architecture/modularity","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Ramsha Engine","permalink":"/ar/docs/basics/architecture/ramsha-engine"},"next":{"title":"Ramsha Hooks","permalink":"/ar/docs/basics/architecture/ramsha-hooks"}}');var s=i(4848),t=i(8453);const d={sidebar_position:2},l="Modularity",o={},c=[{value:"What Is Modularity ?",id:"what-is-modularity-",level:2},{value:"Why Modularity Matters",id:"why-modularity-matters",level:2},{value:"Modularity in Ramsha Framework",id:"modularity-in-ramsha-framework",level:2},{value:"Module Phases",id:"module-phases",level:2},{value:"Overview",id:"overview",level:3},{value:"Detailed Phases",id:"detailed-phases",level:2},{value:"1- Register Phase",id:"1--register-phase",level:3},{value:"2- Prepare Phase",id:"2--prepare-phase",level:3},{value:"3- BuildServices Phase",id:"3--buildservices-phase",level:3},{value:"Creating Modules",id:"creating-modules",level:2},{value:"Simple Module",id:"simple-module",level:3},{value:"Feature Module",id:"feature-module",level:3},{value:"Module Dependencies",id:"module-dependencies",level:2},{value:"Declaring Dependencies",id:"declaring-dependencies",level:3},{value:"Dependency Resolution Order",id:"dependency-resolution-order",level:3},{value:"Avoiding Circular Dependencies",id:"avoiding-circular-dependencies",level:3},{value:"Module Phases Summary",id:"module-phases-summary",level:2},{value:"Next Steps",id:"next-steps",level:2}];function a(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"modularity",children:"Modularity"})}),"\n",(0,s.jsxs)(n.p,{children:["Modularity is a core concept in the ",(0,s.jsx)(n.strong,{children:"Ramsha Framework"}),".",(0,s.jsx)(n.br,{}),"\n","It allows you to build applications as a collection of ",(0,s.jsx)(n.strong,{children:"independent,\nself-contained modules"}),", making your system easier to develop, test,\nand maintain."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"what-is-modularity-",children:"What Is Modularity ?"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Modularity"})," means organizing your application into separate modules,\nwhere each module:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Represents a specific feature or domain"}),"\n",(0,s.jsx)(n.li,{children:"Has a clear responsibility"}),"\n",(0,s.jsx)(n.li,{children:"Can be developed and maintained independently"}),"\n",(0,s.jsx)(n.li,{children:"Communicates with other modules through well-defined contracts"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This approach helps prevent tightly coupled code and improves long-term\nmaintainability."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"why-modularity-matters",children:"Why Modularity Matters"}),"\n",(0,s.jsxs)(n.p,{children:["Traditional monolithic applications often become difficult to maintain\nas they grow.",(0,s.jsx)(n.br,{}),"\n","Ramsha's modular design helps you avoid these problems by:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Reducing coupling between features"}),"\n",(0,s.jsx)(n.li,{children:"Making the codebase easier to understand"}),"\n",(0,s.jsx)(n.li,{children:"Allowing teams to work on different modules in parallel"}),"\n",(0,s.jsx)(n.li,{children:"Simplifying testing and refactoring"}),"\n",(0,s.jsx)(n.li,{children:"Enabling gradual system growth without breaking existing functionality"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"modularity-in-ramsha-framework",children:"Modularity in Ramsha Framework"}),"\n",(0,s.jsxs)(n.p,{children:["In Ramsha Framework, a ",(0,s.jsx)(n.strong,{children:"module"})," is a first-class building block of the\napplication.",(0,s.jsx)(n.br,{}),"\n","Each module is represented by a class that ",(0,s.jsxs)(n.strong,{children:["inherits from\n",(0,s.jsx)(n.code,{children:"RamshaModule"})]})," and participates in the application lifecycle."]}),"\n",(0,s.jsx)(n.p,{children:"A module can:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Declare dependencies on other modules"}),"\n",(0,s.jsx)(n.li,{children:"Prepare some configuration can be use before register services\ncomplete and build"}),"\n",(0,s.jsx)(n.li,{children:"Register services into the dependency injection container"}),"\n",(0,s.jsx)(n.li,{children:"Run logic during application startup"}),"\n",(0,s.jsx)(n.li,{children:"React to application shutdown"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["This design gives Ramsha a ",(0,s.jsx)(n.strong,{children:"structured, predictable, and extensible"}),"\nmodular system."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"module-phases",children:"Module Phases"}),"\n",(0,s.jsx)(n.h3,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"Every Ramsha module goes through three distinct lifecycle phases:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"1. Register    \u2192 Declare module dependencies\n2. Prepare     \u2192 Configure options can be access before register the services \n3. BuildServices \u2192 Register services in DI container\n"})}),"\n",(0,s.jsx)(n.h2,{id:"detailed-phases",children:"Detailed Phases"}),"\n",(0,s.jsx)(n.h3,{id:"1--register-phase",children:"1- Register Phase"}),"\n",(0,s.jsx)(n.p,{children:"The first phase where modules declare their dependencies on other\nmodules:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"public class AppModule : RamshaModule\n{\n    public override void Register(RegisterContext context)\n    {\n        base.Register(context);\n        \n        // Declare dependencies\n        context.DependsOn<AspNetCoreMvcModule>();\n    }\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Key Points:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Dependencies are loaded before the module"}),"\n",(0,s.jsx)(n.li,{children:"Order matters: List dependencies in the order they should be\ninitialized"}),"\n",(0,s.jsx)(n.li,{children:"Circular dependencies are not allowed"}),"\n",(0,s.jsx)(n.li,{children:"All dependencies must be available"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"2--prepare-phase",children:"2- Prepare Phase"}),"\n",(0,s.jsx)(n.p,{children:"Configure options and settings before services are registered and this\noptions can be use when register the application services:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'public override void Prepare(PrepareContext context)\n{\n    base.Prepare(context);\n    \n    // Configure custom options\n    context.Configure<MyOptions>(options =>\n    {\n        options.Setting1 = "value1";\n        options.Setting2 = 42;\n    });\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Key Points:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Access to IConfiguration"}),"\n",(0,s.jsx)(n.li,{children:"Configure options before service registration"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"3--buildservices-phase",children:"3- BuildServices Phase"}),"\n",(0,s.jsx)(n.p,{children:"Register services in the dependency injection container:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"public override void BuildServices(BuildServicesContext context)\n{\n    base.BuildServices(context);\n    \n    // Register application services\n    context.Services.AddTransient<IProductService, ProductService>();\n    context.Services.AddScoped<IOrderService, OrderService>();\n    \n    // Register DbContext\n    context.Services.AddRamshaDbContext<AppDbContext>(options =>\n    {\n        options.AddDefaultRepositories(includeAllEntities: true);\n    });\n    \n    // Configure options\n    context.Services.Configure<MyServiceOptions>(options =>\n    {\n        options.ConnectionTimeout = TimeSpan.FromSeconds(30);\n    });\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Key Points:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Register all application services"}),"\n",(0,s.jsx)(n.li,{children:"Configure middleware and pipeline"}),"\n",(0,s.jsx)(n.li,{children:"Set up database contexts"}),"\n",(0,s.jsx)(n.li,{children:"Register repositories and data access"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"creating-modules",children:"Creating Modules"}),"\n",(0,s.jsx)(n.h3,{id:"simple-module",children:"Simple Module"}),"\n",(0,s.jsx)(n.p,{children:"A basic module with minimal configuration:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"public class SimpleModule : RamshaModule\n{\n    public override void Register(RegisterContext context)\n    {\n        base.Register(context);\n        context.DependsOn<AspNetCoreMvcModule>();\n    }\n\n    public override void BuildServices(BuildServicesContext context)\n    {\n        base.BuildServices(context);\n        context.Services.AddTransient<IMyService, MyService>();\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"feature-module",children:"Feature Module"}),"\n",(0,s.jsx)(n.p,{children:"A module organizing a specific feature:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'public class ProductsModule : RamshaModule\n{\n    public override void Register(RegisterContext context)\n    {\n        base.Register(context);\n        \n        context\n            .DependsOn<EntityFrameworkCoreSqlServerModule>()\n            .DependsOn<AspNetCoreMvcModule>();\n    }\n\n    public override void Prepare(PrepareContext context)\n    {\n        base.Prepare(context);\n        \n        var configuration = context.GetConfiguration();\n        context.Configure<ProductsOptions>(configuration.GetSection("Products"));\n    }\n\n    public override void BuildServices(BuildServicesContext context)\n    {\n        base.BuildServices(context);\n\n        // Register services\n        context.Services.AddTransient<IProductService, ProductService>();\n\n        // get options that defined inside Prepare phase\n        var productOptions = context.Services.ExecutePreparedOptions<ProductsOptions>();\n      \n        context.Services.AddRamshaDbContext<AppDbContext>(options =>\n        {\n            optiona\n            .AddDefaultRepositories(includeAllEntities:productOptions.IncludeAllEntities)\n            .AddRepository<Product,IProductRepository,ProductRepository>();\n        });\n    \n    }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"module-dependencies",children:"Module Dependencies"}),"\n",(0,s.jsx)(n.h3,{id:"declaring-dependencies",children:"Declaring Dependencies"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"public class AppModule : RamshaModule\n{\n    public override void Register(RegisterContext context)\n    {\n        base.Register(context);\n        \n        // Single dependency\n        context.DependsOn<AspNetCoreMvcModule>();\n        \n        // Multiple dependencies (chained)\n        context\n            .DependsOn<EntityFrameworkCoreSqlServerModule>()\n            .DependsOn<IdentityApplicationModule>()\n            .DependsOn<PermissionsApplicationModule>();\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"dependency-resolution-order",children:"Dependency Resolution Order"}),"\n",(0,s.jsx)(n.p,{children:"Modules are initialized in dependency order:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"AppModule depends on:\n  \u2514\u2500 IdentityModule depends on:\n      \u2514\u2500 EntityFrameworkCoreModule depends on:\n          \u2514\u2500 CoreModule\n"})}),"\n",(0,s.jsx)(n.p,{children:"Initialization order:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"CoreModule"}),"\n",(0,s.jsx)(n.li,{children:"EntityFrameworkCoreModule"}),"\n",(0,s.jsx)(n.li,{children:"IdentityModule"}),"\n",(0,s.jsx)(n.li,{children:"AppModule"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"avoiding-circular-dependencies",children:"Avoiding Circular Dependencies"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Bad Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// ModuleA depends on ModuleB\npublic class ModuleA : RamshaModule\n{\n    public override void Register(RegisterContext context)\n    {\n        context.DependsOn<ModuleB>();  // \u274c Circular dependency!\n    }\n}\n\n// ModuleB depends on ModuleA\npublic class ModuleB : RamshaModule\n{\n    public override void Register(RegisterContext context)\n    {\n        context.DependsOn<ModuleA>();  // \u274c Circular dependency!\n    }\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Good Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// Extract common functionality to a shared module\npublic class SharedModule : RamshaModule { }\n\npublic class ModuleA : RamshaModule\n{\n    public override void Register(RegisterContext context)\n    {\n        context.DependsOn<SharedModule>();  // \u2713 Both depend on shared module\n    }\n}\n\npublic class ModuleB : RamshaModule\n{\n    public override void Register(RegisterContext context)\n    {\n        context.DependsOn<SharedModule>();  // \u2713 No circular dependency\n    }\n}\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"module-phases-summary",children:"Module Phases Summary"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Phase"}),(0,s.jsx)(n.th,{children:"Purpose"}),(0,s.jsx)(n.th,{children:"Key Actions"}),(0,s.jsx)(n.th,{children:"When to Use"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Register"})}),(0,s.jsx)(n.td,{children:"Declare dependencies"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"context.DependsOn<T>()"})}),(0,s.jsx)(n.td,{children:"Module requires other modules"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Prepare"})}),(0,s.jsx)(n.td,{children:"Pre-configuration"}),(0,s.jsx)(n.td,{children:"Setup module state before DI"}),(0,s.jsx)(n.td,{children:"Early initialization logic"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Build Services"})}),(0,s.jsx)(n.td,{children:"Service registration"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"context.Services.AddX()"})}),(0,s.jsx)(n.td,{children:"Register DI services"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsx)(n.p,{children:"Continue learning about Ramsha architecture:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"./ramsha-hooks",children:"Ramsha Hooks"})})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"./clean-architecture",children:"Clean Architecture"})})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>l});var r=i(6540);const s={},t=r.createContext(s);function d(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);